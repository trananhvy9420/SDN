<header class="bg-white shadow-md">
  <div class="container mx-auto flex justify-between items-center p-4">
    <a href="/user" class="text-2xl font-bold text-blue-600">MyTeam</a>

    <nav>
      <ul class="flex items-center space-x-6">
        <% if (typeof isLoggedIn !== false && isLoggedIn) { %>
        <li>
          <a
            href="/user"
            class="text-gray-600 hover:text-blue-500 transition-colors"
            >Dashboard</a
          >
        </li>
        <li>
          <a
            href="/profile"
            class="text-gray-600 hover:text-blue-500 transition-colors"
            >Profile</a
          >
        </li>

        <li>
          <a
            href="#"
            id="logout-button"
            class="bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600 transition-colors"
          >
            Logout
          </a>
        </li>

        <% } else { %>
        <li>
          <a
            href="/login"
            class="text-gray-600 hover:text-blue-500 transition-colors"
            >Login</a
          >
        </li>
        <li>
          <a
            href="/register"
            class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition-colors"
            >Register</a
          >
        </li>
        <% } %>
      </ul>
    </nav>
  </div>
</header>

<% if (typeof isLoggedIn !== 'undefined' && isLoggedIn) { %>
<script>
  // Đảm bảo script chỉ chạy một lần dù header được include nhiều lần
  if (!window.logoutListenerAdded) {
    document.addEventListener("DOMContentLoaded", () => {
      const logoutButton = document.getElementById("logout-button");
      if (logoutButton) {
        logoutButton.addEventListener("click", (event) => {
          event.preventDefault(); // Ngăn link điều hướng

          // Xóa token khỏi localStorage
          localStorage.clear();

          alert("Bạn đã đăng xuất thành công!");

          // Chuyển hướng về trang đăng nhập
          window.location.href = "/login";
        });
      }
    });
    window.logoutListenerAdded = true;
  }
</script>
<% } %>
